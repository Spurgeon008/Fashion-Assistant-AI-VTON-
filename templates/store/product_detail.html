{% extends 'base.html' %}

{% load static %}

{% block content %}

<section class="section-content padding-y bg">
    <div class="container">
    
    <!-- ============================ COMPONENT 1 ================================= -->
    <div class="card">
        <div class="row no-gutters">
            <aside class="col-md-6">
    <article class="gallery-wrap"> 
        <div class="img-big-wrap">
           <a href="#"><img src="{{ single_product.images.url }}" class="img-fluid"></a>
        </div> <!-- img-big-wrap.// -->
        
    </article> <!-- gallery-wrap .end// -->
            </aside>
            <main class="col-md-6 border-left">
              <form action="{% url 'add_cart' single_product.id %}" method="POST">
              {% csrf_token %}
              <article class="content-body">
    
                <h2 class="title">{{ single_product.product_name }}</h2>
                
                <!-- Rating -->
                <div class="rating-stars mb-3">
                    <i class="fas fa-star"></i>
                    <i class="fas fa-star"></i>
                    <i class="fas fa-star"></i>
                    <i class="fas fa-star"></i>
                    <i class="far fa-star"></i>
                    <span class="text-muted ml-2">(4.0) | 128 reviews</span>
                </div>
                
                <!-- Price -->
                <div class="mb-3"> 
                    <var class="price h3">${{ single_product.price }}</var>
                    <span class="text-muted ml-2"><del>$99.99</del></span>
                    <span class="badge badge-success ml-2">20% OFF</span>
                </div>
                
                <!-- Stock Status -->
                <div class="mb-3">
                    {% if single_product.stock > 10 %}
                        <span class="stock-indicator in-stock">
                            <i class="fas fa-check-circle mr-1"></i> In Stock
                        </span>
                    {% elif single_product.stock > 0 %}
                        <span class="stock-indicator low-stock">
                            <i class="fas fa-exclamation-circle mr-1"></i> Only {{ single_product.stock }} left!
                        </span>
                    {% else %}
                        <span class="stock-indicator out-of-stock">
                            <i class="fas fa-times-circle mr-1"></i> Out of Stock
                        </span>
                    {% endif %}
                </div>
                
                <!-- Description -->
                <p class="text-muted">{{single_product.description}}</p>
                
                <hr>
                
                <!-- Color Selection -->
                {% if variations.color %}
                <div class="row">
                    <div class="item-option-select">
                        <h6><i class="fas fa-palette mr-2"></i>Choose Color</h6>
                        <select name="color" id="color" class="form-control" required>
                            <option value="" disabled selected>Select a color</option>
                            {% for variation in variations.color %}
                                <option value="{{ variation.variation_value | lower }}">{{ variation.variation_value | capfirst }}</option>
                            {% endfor %}
                        </select>
                    </div>
                </div>
                {% endif %}
                
                <!-- Size Selection -->
                {% if variations.size %}
                <div class="row mt-3">
                    <div class="item-option-select">
                        <h6><i class="fas fa-ruler mr-2"></i>Select Size</h6>
                        <select name="size" id="size" class="form-control" required>
                            <option value="" disabled selected>Select a size</option>
                            {% for variation in variations.size %}
                                <option value="{{ variation.variation_value | lower }}">{{ variation.variation_value | upper }}</option>
                            {% endfor %}
                        </select>
                    </div>
                </div>
                {% endif %}
                
                <hr>
                
                <!-- Action Buttons -->
                <div class="d-flex gap-2">
                    {% if single_product.stock > 0 %}
                        <button type="submit" class="btn btn-primary btn-lg flex-grow-1">
                            <i class="fas fa-shopping-cart mr-2"></i> Add to Cart
                        </button>
                        <button type="button" class="btn btn-outline-danger btn-lg wishlist-btn-detail">
                            <i class="far fa-heart"></i>
                        </button>
                    {% else %}
                        <button type="button" class="btn btn-secondary btn-lg disabled flex-grow-1">
                            <i class="fas fa-times mr-2"></i> Out of Stock
                        </button>
                    {% endif %}
                </div>
                
                <!-- Product Features -->
                <div class="mt-4">
                    <ul class="list-unstyled">
                        <li class="mb-2">
                            <i class="fas fa-shipping-fast text-primary mr-2"></i>
                            <span class="text-muted">Free shipping on orders over $50</span>
                        </li>
                        <li class="mb-2">
                            <i class="fas fa-undo text-primary mr-2"></i>
                            <span class="text-muted">30-day easy returns</span>
                        </li>
                        <li class="mb-2">
                            <i class="fas fa-shield-alt text-primary mr-2"></i>
                            <span class="text-muted">1-year warranty</span>
                        </li>
                    </ul>
                </div>
                
            </article>
            </form>
            </main>
        </div> <!-- row.// -->
    </div> <!-- card.// -->
    <!-- ============================ COMPONENT 1 END .// ================================= -->
    
    <br>
    
    <!-- ============================ VIRTUAL TRY-ON SECTION ================================= -->
    <div class="card">
        <div class="card-header">
            <h4>Virtual Try-On</h4>
        </div>
        <div class="card-body">
            <!-- VTon Tabs -->
            <ul class="nav nav-tabs" id="vtonTabs" role="tablist">
                <li class="nav-item">
                    <a class="nav-link active" id="image-vton-tab" data-toggle="tab" href="#image-vton" role="tab">Image Gen VTon</a>
                </li>
                <li class="nav-item">
                    <a class="nav-link" id="video-vton-tab" data-toggle="tab" href="#video-vton" role="tab">Video Gen VTon</a>
                </li>
            </ul>
            
            <!-- VTon Tab Content -->
            <div class="tab-content" id="vtonTabsContent">
                <!-- Image Gen VTon Tab -->
                <div class="tab-pane fade show active" id="image-vton" role="tabpanel">
                    <div class="mt-3">
                        <h5>Upload Images for Image-based Virtual Try-On</h5>
                        <form id="image-vton-form">
                            <div class="form-group">
                                <label for="person-image">Person Image:</label>
                                <input type="file" class="form-control-file" id="person-image" accept="image/*" required>
                            </div>
                            <div class="form-group">
                                <label for="cloth-image">Cloth Image:</label>
                                <input type="file" class="form-control-file" id="cloth-image" accept="image/*" required>
                            </div>
                            <button type="submit" class="btn btn-primary">Generate Try-On (Image)</button>
                        </form>
                        <div id="image-vton-result" class="mt-3" style="display: none;">
                            <h5>Result:</h5>
                            <img id="image-vton-output" src="" alt="VTon Result" class="img-fluid" style="max-width: 100%; border: 1px solid #ddd; border-radius: 4px; padding: 5px;">
                            <div class="mt-2">
                                <button id="download-vton-btn" class="btn btn-success">
                                    <i class="fas fa-download"></i> Download Image
                                </button>
                            </div>
                        </div>
                    </div>
                </div>
                
                <!-- Video Gen VTon Tab -->
                <div class="tab-pane fade" id="video-vton" role="tabpanel">
                    <div class="mt-3">
                        <h5>Upload Image for Video-based Virtual Try-On</h5>
                        <form id="video-vton-form">
                            <div class="form-group">
                                <label for="video-person-image">Person Image:</label>
                                <input type="file" class="form-control-file" id="video-person-image" accept="image/*" required>
                            </div>
                            <button type="submit" class="btn btn-primary">Generate Try-On (Video)</button>
                        </form>
                        <div id="video-vton-result" class="mt-3" style="display: none;">
                            <h5>Result:</h5>
                            <video id="video-vton-output" src="" controls class="img-fluid"></video>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <!-- ============================ VIRTUAL TRY-ON SECTION END ================================= -->

    <br>
    
    <div class="row">
                <div class="col-md-9">
    
        <header class="section-heading">
            <h3>Customer Reviews </h3>  
            
        </header>
    
        <article class="box mb-3">
            <div class="icontext w-100">
                <img src="./images/avatars/avatar1.jpg" class="img-xs icon rounded-circle">
                <div class="text">
                    <span class="date text-muted float-md-right">24.04.2020 </span>  
                    <h6 class="mb-1">Mike John </h6>
                    
                </div>
            </div> <!-- icontext.// -->
            <div class="mt-3">
                <p>
                    Dummy comment Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod
                    tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam,
                    quis nostrud exercitation ullamco laboris nisi ut aliquip
                </p>	
            </div>
        </article>
    
        
    
        </div> <!-- col.// -->
    </div> <!-- row.// -->
    
    
    </div> <!-- container .//  -->
    </section>
    <!-- ========================= SECTION CONTENT END// ========================= -->
     {% endblock %}