{% extends 'base.html' %}
{% load static %}

{% block content %}

<!-- ========================= DRESS RECOMMENDER HERO ========================= -->
<section class="dress-recommender-hero" style="background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); padding: 100px 0; min-height: 70vh; display: flex; align-items: center;">
    <div class="container">
        <div class="row align-items-center">
            <div class="col-lg-6">
                <div class="hero-content">
                    <h1 style="color: white; font-size: 3.5rem; font-weight: 700; margin-bottom: 20px; line-height: 1.2;">
                        <i class="fas fa-cloud-sun" style="color: #ffd700;"></i>
                        Weather-Smart Dressing
                    </h1>
                    <p style="color: rgba(255,255,255,0.9); font-size: 1.3rem; margin-bottom: 30px;">
                        Get AI-powered outfit recommendations based on real-time weather conditions. Never be caught off-guard by the weather again!
                    </p>
                    
                    <!-- Quick Weather Display -->
                    {% if weather_data %}
                    <div class="current-weather" style="background: rgba(255,255,255,0.1); border-radius: 15px; padding: 25px; margin-bottom: 30px; backdrop-filter: blur(10px);">
                        <div class="row align-items-center">
                            <div class="col-md-6">
                                <div class="weather-info">
                                    <h3 style="color: white; margin-bottom: 10px;">
                                        <i class="fas fa-map-marker-alt"></i> {{ weather_data.city }}
                                    </h3>
                                    <div class="temperature" style="font-size: 2.5rem; color: #ffd700; font-weight: 700;">
                                        {{ weather_data.temperature|floatformat:1 }}°C
                                    </div>
                                    <div style="color: rgba(255,255,255,0.8); font-size: 1.1rem;">
                                        Feels like {{ weather_data.feels_like|floatformat:1 }}°C
                                    </div>
                                </div>
                            </div>
                            <div class="col-md-6">
                                <div class="weather-details">
                                    <div style="color: white; font-size: 1.2rem; margin-bottom: 10px;">
                                        <i class="fas fa-eye"></i> {{ weather_data.condition|title }}
                                    </div>
                                    <div style="color: rgba(255,255,255,0.8);">
                                        <i class="fas fa-tint"></i> {{ weather_data.humidity }}% Humidity
                                    </div>
                                    <div style="color: rgba(255,255,255,0.8);">
                                        <i class="fas fa-wind"></i> {{ weather_data.wind_speed|floatformat:1 }} km/h Wind
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    {% endif %}
                    
                    <div class="hero-actions">
                        <button class="btn btn-light btn-lg" onclick="document.getElementById('recommendationForm').scrollIntoView()" style="padding: 15px 40px; font-size: 1.2rem; margin-right: 15px;">
                            <i class="fas fa-magic"></i> Get Recommendation
                        </button>
                        {% if user.is_authenticated %}
                        <a href="{% url 'dress_recommender:my_recommendations' %}" class="btn btn-outline-light btn-lg" style="padding: 15px 40px; font-size: 1.2rem;">
                            <i class="fas fa-history"></i> My Recommendations
                        </a>
                        {% endif %}
                    </div>
                </div>
            </div>
            <div class="col-lg-6">
                <div class="hero-illustration text-center">
                    <div class="weather-icons" style="font-size: 4rem; color: rgba(255,255,255,0.3);">
                        <i class="fas fa-sun" style="animation: float 3s ease-in-out infinite;"></i>
                        <i class="fas fa-cloud" style="animation: float 3s ease-in-out infinite 1s;"></i>
                        <i class="fas fa-cloud-rain" style="animation: float 3s ease-in-out infinite 2s;"></i>
                    </div>
                    <div class="outfit-preview" style="margin-top: 30px;">
                        <div class="outfit-cards">
                            <div class="outfit-card" style="background: rgba(255,255,255,0.1); border-radius: 15px; padding: 20px; margin: 10px; display: inline-block; backdrop-filter: blur(10px);">
                                <i class="fas fa-tshirt" style="font-size: 2rem; color: #ffd700; margin-bottom: 10px;"></i>
                                <div style="color: white; font-size: 0.9rem;">Smart Suggestions</div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</section>

<!-- ========================= RECOMMENDATION FORM ========================= -->
<section class="recommendation-form" id="recommendationForm" style="background: var(--bg-dark); padding: 80px 0;">
    <div class="container">
        <div class="row justify-content-center">
            <div class="col-lg-8">
                <div class="form-card" style="background: var(--bg-light); border-radius: 20px; padding: 40px; border: 1px solid var(--border-light);">
                    <div class="text-center mb-4">
                        <h2 style="color: var(--text-primary); font-size: 2.5rem; font-weight: 700; margin-bottom: 15px;">
                            <i class="fas fa-brain" style="color: #667eea;"></i> Get Your Recommendation
                        </h2>
                        <p style="color: var(--text-secondary); font-size: 1.1rem;">Tell us your location and we'll suggest the perfect outfit for today's weather</p>
                    </div>
                    
                    <form method="post" action="{% url 'dress_recommender:get_recommendation' %}">
                        {% csrf_token %}
                        
                        <div class="form-group mb-4">
                            <label style="color: var(--text-primary); font-weight: 600; margin-bottom: 10px; display: block;">
                                <i class="fas fa-map-marker-alt"></i> Your Location
                            </label>
                            <input type="text" name="city" class="form-control" placeholder="Enter your city (e.g., New York, London, Tokyo)" 
                                   value="New York" required style="padding: 15px; font-size: 1.1rem; border-radius: 10px;">
                            <small style="color: var(--text-secondary); margin-top: 8px; display: block;">
                                <i class="fas fa-info-circle"></i> We'll get the current weather for your location
                            </small>
                        </div>
                        
                        <div class="form-group text-center">
                            <button type="submit" class="btn btn-primary btn-lg" style="padding: 15px 50px; font-size: 1.2rem; border-radius: 25px; background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); border: none;">
                                <i class="fas fa-magic"></i> Get My Outfit Recommendation
                            </button>
                        </div>
                    </form>
                </div>
            </div>
        </div>
    </div>
</section>

<!-- ========================= HOW IT WORKS ========================= -->
<section class="how-it-works" style="background: var(--bg-section); padding: 80px 0;">
    <div class="container">
        <div class="text-center mb-5">
            <h2 style="color: var(--text-primary); font-size: 2.5rem; font-weight: 700; margin-bottom: 15px;">
                How It Works
            </h2>
            <p style="color: var(--text-secondary); font-size: 1.1rem;">Simple, smart, and personalized outfit recommendations</p>
        </div>
        
        <div class="row">
            <div class="col-lg-4 mb-4">
                <div class="step-card text-center" style="background: var(--bg-light); border-radius: 20px; padding: 40px; border: 1px solid var(--border-light); height: 100%;">
                    <div class="step-icon" style="width: 80px; height: 80px; background: #667eea; border-radius: 50%; display: flex; align-items: center; justify-content: center; margin: 0 auto 20px; color: white; font-size: 2rem;">
                        <i class="fas fa-cloud-sun"></i>
                    </div>
                    <h4 style="color: var(--text-primary); margin-bottom: 15px;">1. Weather Analysis</h4>
                    <p style="color: var(--text-secondary);">We analyze current weather conditions including temperature, humidity, wind, and precipitation for your location.</p>
                </div>
            </div>
            
            <div class="col-lg-4 mb-4">
                <div class="step-card text-center" style="background: var(--bg-light); border-radius: 20px; padding: 40px; border: 1px solid var(--border-light); height: 100%;">
                    <div class="step-icon" style="width: 80px; height: 80px; background: #764ba2; border-radius: 50%; display: flex; align-items: center; justify-content: center; margin: 0 auto 20px; color: white; font-size: 2rem;">
                        <i class="fas fa-brain"></i>
                    </div>
                    <h4 style="color: var(--text-primary); margin-bottom: 15px;">2. AI Processing</h4>
                    <p style="color: var(--text-secondary);">Our AI considers weather patterns, comfort factors, and style preferences to generate personalized recommendations.</p>
                </div>
            </div>
            
            <div class="col-lg-4 mb-4">
                <div class="step-card text-center" style="background: var(--bg-light); border-radius: 20px; padding: 40px; border: 1px solid var(--border-light); height: 100%;">
                    <div class="step-icon" style="width: 80px; height: 80px; background: #ffd700; border-radius: 50%; display: flex; align-items: center; justify-content: center; margin: 0 auto 20px; color: white; font-size: 2rem;">
                        <i class="fas fa-tshirt"></i>
                    </div>
                    <h4 style="color: var(--text-primary); margin-bottom: 15px;">3. Perfect Outfit</h4>
                    <p style="color: var(--text-secondary);">Get detailed outfit suggestions with specific clothing items, colors, and styling tips perfect for the weather.</p>
                </div>
            </div>
        </div>
    </div>
</section>

<!-- ========================= RECENT RECOMMENDATIONS ========================= -->
{% if recent_recommendations %}
<section class="recent-recommendations" style="background: var(--bg-dark); padding: 80px 0;">
    <div class="container">
        <div class="text-center mb-5">
            <h2 style="color: var(--text-primary); font-size: 2.5rem; font-weight: 700; margin-bottom: 15px;">
                Recent Recommendations
            </h2>
            <p style="color: var(--text-secondary); font-size: 1.1rem;">See what others have been recommended lately</p>
        </div>
        
        <div class="row">
            {% for recommendation in recent_recommendations %}
            <div class="col-lg-4 mb-4">
                <div class="recommendation-card" style="background: var(--bg-light); border-radius: 20px; padding: 30px; border: 1px solid var(--border-light); height: 100%;">
                    <div class="weather-badge" style="background: #667eea; color: white; padding: 8px 15px; border-radius: 20px; font-size: 0.9rem; display: inline-block; margin-bottom: 15px;">
                        <i class="fas fa-thermometer-half"></i> {{ recommendation.weather_data.temperature|floatformat:1 }}°C, {{ recommendation.weather_data.condition|title }}
                    </div>
                    <p style="color: var(--text-primary); margin-bottom: 15px; line-height: 1.6;">{{ recommendation.recommendation_text|truncatewords:20 }}</p>
                    <div class="recommendation-meta" style="color: var(--text-secondary); font-size: 0.9rem;">
                        <i class="fas fa-clock"></i> {{ recommendation.created_at|timesince }} ago
                    </div>
                </div>
            </div>
            {% endfor %}
        </div>
    </div>
</section>
{% endif %}

<style>
@keyframes float {
    0%, 100% { transform: translateY(0px); }
    50% { transform: translateY(-20px); }
}

.form-control {
    background: var(--bg-dark) !important;
    border: 1px solid var(--border-light) !important;
    color: var(--text-primary) !important;
}

.form-control:focus {
    background: var(--bg-dark) !important;
    border-color: #667eea !important;
    box-shadow: 0 0 0 0.2rem rgba(102, 126, 234, 0.25) !important;
    color: var(--text-primary) !important;
}

.step-card:hover {
    transform: translateY(-5px);
    box-shadow: 0 15px 40px rgba(0,0,0,0.2);
    transition: all 0.3s ease;
}

.recommendation-card:hover {
    transform: translateY(-3px);
    box-shadow: 0 10px 30px rgba(0,0,0,0.2);
    transition: all 0.3s ease;
}
</style>

{% endblock %}